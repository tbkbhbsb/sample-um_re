<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
    "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="um_tbkbhbsb.domain.repository.UserTableRepository">

	<!-- <resultMap type="UserTable" id="UserTableResultMap"> <id column="userId" 
		property="userId"/> <result column="name" property="name" /> <result column="birthday" 
		property="birthday" /> <result column="address" property="address" /> <result 
		column="tel" property="tel" /> <result column="password" property="password" 
		/> <result column="state" property="state" /> </resultMap> -->
	<!-- resultMap="UserTableResultMap" -->


	<select id="findOneByUserId" parameterType="String" resultType="UserTable">
	
    <![CDATA[
        SELECT
        	userId,
			name,
			birthday,
			address,
			tel,
			password,
			state,
			lastUpdate
        FROM
            UserTable
        WHERE
            userId = #{userId}
    ]]>

	</select>

	<insert id="createOneUser" parameterType="UserTable">
		<![CDATA[
	        INSERT INTO UserTable
	        	(
	        	userId,
				name,
				birthday,
				address,
				tel,
				password,
				state,
				lastUpdate
				)
	        VALUES
	        	(
	        	#{userId},
				#{name},
				#{birthday},
				#{address},
				#{tel},
				#{password},
				#{state},
				#{lastUpdate}
	        	)
	           
    ]]>

	</insert>

<!-- UserTable JOIN RoleTable ON UserTable.userId = RoleTable.userId -->
<!-- UserTable LEFT OUTER JOIN RoleTable USING(UserTable.userId) -->

	<select id="searchUserByAndQuery" parameterType="um_tbkbhbsb.domain.Form.SearchForm"
		resultType="um_tbkbhbsb.domain.Form.SearchForm">
	
    <![CDATA[
        SELECT
        	UserTable.userId,
			name,
			birthday,
			address,
			tel,
			state,
			role
        FROM
            UserTable JOIN RoleTable ON UserTable.userId = RoleTable.userId
        WHERE
            UserTable.userId = #{userId} OR
            name = #{name} OR
			birthday = #{birthday} OR
			address = #{address} OR
			tel = #{tel} OR
			state = #{state} OR
			role = #{role}
    ]]>

	</select>

</mapper>
